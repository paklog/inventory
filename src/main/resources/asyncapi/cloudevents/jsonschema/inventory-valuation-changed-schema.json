{
  "$id": "https://paklog.com/schemas/inventory/v1/inventory-valuation-changed.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Inventory Valuation Changed Event",
  "description": "Published when inventory valuation changes due to cost updates or valuation method changes",
  "type": "object",
  "required": ["sku", "valuation_method", "previous_unit_cost", "new_unit_cost", "previous_total_value", "new_total_value", "quantity", "reason"],
  "properties": {
    "sku": {
      "type": "string",
      "description": "Stock Keeping Unit identifier",
      "example": "SKU-12345"
    },
    "valuation_method": {
      "type": "string",
      "description": "Valuation method used",
      "enum": ["FIFO", "LIFO", "WEIGHTED_AVERAGE", "STANDARD_COST", "MOVING_AVERAGE"],
      "example": "WEIGHTED_AVERAGE"
    },
    "previous_unit_cost": {
      "type": "number",
      "description": "Previous unit cost",
      "example": 10.50
    },
    "new_unit_cost": {
      "type": "number",
      "description": "New unit cost",
      "example": 12.75
    },
    "previous_total_value": {
      "type": "number",
      "description": "Previous total inventory value",
      "example": 1050.00
    },
    "new_total_value": {
      "type": "number",
      "description": "New total inventory value",
      "example": 1275.00
    },
    "quantity": {
      "type": "integer",
      "description": "Quantity on hand",
      "minimum": 0,
      "example": 100
    },
    "reason": {
      "type": "string",
      "description": "Reason for valuation change",
      "example": "Purchase price increase"
    }
  }
}
