{
  "$id": "com.paklog.inventory.fulfillment.v1.product-stock.status-changed",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stock Status Changed Event",
  "description": "Published when inventory stock status changes (e.g., AVAILABLE → QUARANTINE, QUARANTINE → AVAILABLE, AVAILABLE → DAMAGED)",
  "type": "object",
  "required": ["sku", "previousStatus", "newStatus", "quantity", "reason"],
  "properties": {
    "sku": {
      "type": "string",
      "description": "Stock Keeping Unit identifier",
      "example": "SKU-12345"
    },
    "previousStatus": {
      "type": "string",
      "description": "Previous stock status",
      "enum": ["AVAILABLE", "QUARANTINE", "DAMAGED", "EXPIRED", "ON_HOLD", "IN_TRANSIT"],
      "example": "AVAILABLE"
    },
    "newStatus": {
      "type": "string",
      "description": "New stock status",
      "enum": ["AVAILABLE", "QUARANTINE", "DAMAGED", "EXPIRED", "ON_HOLD", "IN_TRANSIT"],
      "example": "QUARANTINE"
    },
    "quantity": {
      "type": "integer",
      "description": "Quantity changing status",
      "minimum": 1,
      "example": 30
    },
    "reason": {
      "type": "string",
      "description": "Reason for status change",
      "example": "Quality issue detected during inspection"
    },
    "lotNumber": {
      "type": "string",
      "description": "Optional lot number if status change is lot-specific",
      "example": "LOT-2024-Q1-001"
    }
  }
}
