# Spring Boot Application Properties

# Application Name
spring.application.name=inventory-service

# Server Port
server.port=8085

# Spring Data MongoDB
spring.data.mongodb.uri=mongodb://localhost:27017/inventorydb

# MongoDB Connection Pool Settings
spring.data.mongodb.pool.min-size=10
spring.data.mongodb.pool.max-size=100
spring.data.mongodb.pool.max-wait-time-ms=5000
spring.data.mongodb.pool.max-connection-idle-time-ms=60000
spring.data.mongodb.pool.max-connection-life-time-ms=1800000
spring.data.mongodb.pool.maintenance-frequency-ms=10000

# Spring Kafka
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=inventory-service-group
# Add correlation ID to Kafka messages
spring.kafka.producer.properties.interceptor.classes=com.paklog.inventory.infrastructure.observability.CorrelationIdKafkaInterceptor

# Outbox Publisher - Fixed delay in milliseconds (5 seconds)
outbox.publisher.fixed-delay=5000

# Logging
logging.level.root=INFO
logging.level.com.paklog.inventory=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n

# OpenTelemetry & Distributed Tracing
management.tracing.sampling.probability=1.0
management.otlp.tracing.endpoint=http://localhost:4318/v1/traces
management.otlp.tracing.headers.authorization=Bearer ${OTLP_TOKEN:}

# Metrics & Observability
management.endpoints.web.exposure.include=health,info,metrics,prometheus,trace
management.endpoint.health.show-details=always
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# MongoDB Backup Configuration
mongodb.backup.enabled=false
mongodb.backup.directory=/var/backups/inventory-mongodb
mongodb.backup.retention-days=30
mongodb.backup.schedule=0 0 2 * * *

# Redis Cache Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=20
spring.data.redis.lettuce.pool.max-idle=10
spring.data.redis.lettuce.pool.min-idle=5

# Spring Cache Configuration
spring.cache.type=caffeine
spring.cache.cache-names=productStock,skuList,abcClassification,stockLocation
spring.cache.caffeine.spec=maximumSize=10000,expireAfterWrite=5m,expireAfterAccess=2m,recordStats

# OpenAPI / Swagger UI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.show-actuator=false
